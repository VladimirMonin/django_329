<!-- cards/templates/cards/catalog.html -->
<!-- Использует шаблон cards/templates/cards/include/card_preview.html -->
{% extends "base.html" %}
{% block content %}
<h1>Каталог карточек Anki для интервального повторения</h1>
<nav aria-label="Page navigation">
  <ul class="pagination">
    {% if page_obj.has_previous %}
      <li class="page-item"><a class="page-link link-secondary" href="?page={{ page_obj.previous_page_number }}&sort={{ sort }}&order={{ order }}">Предыдущая</a></li>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
      <li class="page-item {% if page_obj.number == num %}active{% endif %}"><a class="page-link link-secondary" href="?page={{ num }}&sort={{ sort }}&order={{ order }}">{{ num }}</a></li>
{% endfor %}
{% if page_obj.has_next %}
<li class="page-item"><a class="page-link link-secondary" href="?page={{ page_obj.next_page_number }}&sort={{ sort }}&order={{ order }}">Следующая</a></li>
{% endif %}

  </ul>
</nav>


<!-- В начале шаблона catalog.html, после <h1> -->
<form action="{% url 'catalog' %}" method="get" class="mb-5 mt-3">
  <div class="input-group mb-3">
    <input type="text" class="form-control" placeholder="Поиск по карточкам" name="search_query" aria-label="Поиск по карточкам">
    <button class="btn btn-outline-secondary" type="submit">Поиск</button>
  </div>

  <!-- Радиокнопки для сортировки -->
  <div class="mb-3">
    <div><strong>Сортировать по:</strong></div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="sort" id="sortUploadDate" value="upload_date" checked>
      <label class="form-check-label" for="sortUploadDate">
        Дате загрузки
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="sort" id="sortViews" value="views">
      <label class="form-check-label" for="sortViews">
        Просмотрам
      </label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="radio" name="sort" id="sortFavorites" value="favorites">
      <label class="form-check-label" for="sortFavorites">
        Избранному
      </label>
    </div>
  </div>
  <!-- Радиокнопки для выбора направления сортировки  
    order: порядок сортировки ('asc' для возрастания, 'desc' для убывания; по умолчанию 'desc'). -->
    {% comment %} Дадим тут инлайновость для этой формы {% endcomment %}
    <div class="mb-3">
      <div><strong>Порядок сортировки:</strong></div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="order" id="sortOrderDesc" value="desc" checked>
        <label class="form-check-label" for="sortUploadDate">
          Убыванию
        </label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="order" id="sortOrderAsc" value="asc">
        <label class="form-check-label" for="sortViews">
          Возрастанию
        </label>
      </div>
</form>



{% for card in cards %}
    {% include "cards/include/card_preview.html" %}
{% endfor %}
{% endblock %}

